<!doctype html>
<html lang="bn">
<head>
  <!-- ✅ Google Analytics Tracking Code -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-7R5JZ3ESV2"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-7R5JZ3ESV2');
  </script>
  <!-- ✅ End of Google Analytics -->

  <link rel="manifest" href="manifest.json">
  <script>
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('service-worker.js');
    }
  </script>

  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Fuel Tracker — Home</title>
  <style>
    :root{
      --bg1:#f5e0c3;
      --bg2:#ffe0b2;
      --card:#fff3e0;
      --accent:#ff7043;
      --text:#4a2f23;
    }
    *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,'Noto Sans',sans-serif;}

    body{
      margin:0;
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:18px;
    }

    .card{
      width:100%;
      max-width:480px;
      background:var(--card);
      border-radius:20px;
      padding:24px;
      box-shadow:0 12px 30px rgba(0,0,0,0.15);
      text-align:center;
      position:relative;
    }

    .logo{
      width:100px;height:100px;border-radius:12px;
      display:block;margin:0 auto 12px auto;
      object-fit:contain;
      box-shadow:0 6px 18px rgba(0,0,0,0.3);
    }

    h1{color:var(--accent);margin:8px 0 10px 0;}
    p.info{
      color:var(--text);
      text-align:center;
      font-size:1rem;
      margin:10px 0 18px 0;
      line-height:1.5;
    }

    label{display:block;margin-top:10px;font-weight:600;color:var(--text);}
    input[type="text"],input[type="date"]{
      width:100%;
      padding:10px;
      border-radius:10px;
      border:1px solid #a6c9b9;
      margin-top:6px;
      background:linear-gradient(90deg,#eaf5ff,#e8ffe8);
    }
    input:disabled{background:#f0f0f0;color:#666;}

    .btn{
      border:none;border-radius:10px;
      padding:12px 16px;font-weight:700;
      cursor:pointer;transition:0.3s;color:#fff;
    }

    .btn.fuel{
      background:linear-gradient(90deg,#ff7043,#ff9800);
      font-size:1.2rem;width:100%;
      margin-bottom:18px;box-shadow:0 4px 12px rgba(255,112,67,0.4);
    }
    .btn.update{background:linear-gradient(90deg,#81c784,#4caf50);font-size:0.9rem;margin-top:12px;padding:8px 14px;}
    .btn.edit{background:linear-gradient(90deg,#64b5f6,#42a5f5);font-size:0.9rem;margin-top:8px;padding:8px 14px;}
    .btn.docs{background:linear-gradient(90deg,#4caf50,#81c784);}
    .btn.reports{background:linear-gradient(90deg,#42a5f5,#64b5f6);}
    .btn.service{background:linear-gradient(90deg,#ba68c8,#8e24aa);}
    .btn.gov{background:linear-gradient(90deg,#ffb74d,#ff9800);}
    .btn:hover{filter:brightness(1.1);}

    .row{display:flex;gap:8px;margin-top:16px;justify-content:center;flex-wrap:wrap;}
    .credit{text-align:center;margin-top:16px;font-weight:600;color:#4b2e05;}
    .credit small{display:block;margin-top:3px;}
    .heart{font-size:1.2rem;color:#e53935;cursor:pointer;margin-top:8px;transition:0.3s;}
    .heart:hover{transform:scale(1.3);}

    .reminder{
      background:#fff8e1;
      border-radius:10px;
      padding:10px;
      font-size:0.95rem;
      color:#4e342e;
      margin-top:10px;
    }

    #thanksBox{
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.6);
      display:flex;align-items:center;justify-content:center;
      opacity:0;visibility:hidden;
      transition:opacity 0.4s ease;
      z-index:1000;
    }
    #thanksBox.active{opacity:1;visibility:visible;}
    .thanksMsg{
      background:#fff8e1;
      border-radius:16px;
      padding:20px 24px;
      text-align:center;
      box-shadow:0 8px 25px rgba(0,0,0,0.2);
      animation:popIn 0.5s ease;
    }
    .thanksMsg p{color:#4e342e;font-size:1rem;font-weight:600;}
    .btn.upi{background:linear-gradient(90deg,#7e57c2,#5e35b1);color:#fff;border:none;border-radius:10px;padding:8px 16px;margin-top:10px;font-weight:700;cursor:pointer;}
    @keyframes popIn{from{transform:scale(0.8);opacity:0;}to{transform:scale(1);opacity:1;}}

    #fadeLogo{
      position:fixed;
      top:0;left:0;width:100%;height:100%;
      background:linear-gradient(135deg,#fff3e0,#ffe0b2);
      display:flex;flex-direction:column;
      align-items:center;justify-content:center;
      opacity:0;visibility:hidden;
      transition:opacity 0.4s ease;
      z-index:2000;
    }
    #fadeLogo.active{opacity:1;visibility:visible;animation:fadeOut 0.8s ease 0.5s forwards;}
    #fadeLogo img{width:130px;height:130px;object-fit:contain;animation:zoomIn 0.5s ease;}
    #fadeLogo p{color:#8e24aa;font-weight:700;margin-top:10px;font-size:1.2rem;opacity:0;}
    @keyframes fadeOut{to{opacity:0;visibility:hidden;}}
    @keyframes zoomIn{0%{transform:scale(0.7);opacity:0;}100%{transform:scale(1);opacity:1;}}
    .fadeBlessing{animation:blessFade 2s ease forwards;}
    @keyframes blessFade{0%{opacity:0;transform:translateY(10px);}20%{opacity:1;}80%{opacity:1;}100%{opacity:0;transform:translateY(-20px);}}
  </style>
</head>
<body>

<div id="fadeLogo">
  <img id="fadeImg" src="maa.png" alt="Maa">
  <p id="fadeText">মায়ের আশীর্বাদ 🙏</p>
</div>

<div class="card">
  <img src="FuelTracker.png" alt="FuelTracker Logo" class="logo">
  <h1>Vehicle Manager</h1>
  <p class="info">
    আপনার গাড়িতে কবে, কত টাকার তেল ভরছেন, কতো মাইলেজ দিচ্ছে, শেষ করে মোবিল পরিবর্তন করেছেন তার হিসাব রাখুন।<br>
    ডেটাগুলি অফলাইনে সেভ থাকবে এবং সম্পূর্ণ নিরাপদ।
  </p>

  <button class="btn fuel" onclick="go('fuel.html')">⛽ Fuel Entry</button>

  <label>Car Number / Model Name</label>
  <input id="carName" type="text" placeholder="e.g. WB24A2025">

  <label>Insurance Expiry</label>
  <input id="insDate" type="date">

  <label>Pollution Expiry</label>
  <input id="polDate" type="date">

  <button class="btn update" onclick="saveMeta()">💾 Update</button>
  <button class="btn edit" onclick="enableEdit()">✏️ Edit</button>

  <div class="reminder" id="reminderBox"></div>

  <div class="row">
    <button class="btn docs" onclick="go('docs.html')">📄 Documents</button>
    <button class="btn reports" onclick="go('report.html')">📊 Reports</button>
    <button class="btn service" onclick="go('service.html')">🔧 Servicing Detail</button>
    <button class="btn gov" onclick="go('drivingrules.pdf')">📘 সরকারী স্বীকৃত নথি</button>
  </div>

  <div class="credit">
    Chakdaha Roy Computer Academy
    <small>email : surajit.chakdaha@gmail.com :: WhatsApp-9748615058</small>
    <div class="heart" onclick="showThanks()">❤️</div>
  </div>
</div>

<div id="thanksBox" onclick="closeThanks()">
  <div class="thanksMsg">
    <p>আমাদের প্রয়াস যদি ভালো লাগে তাহলে আপনার যা মনে চায় 1/- থেকে শুরু করে যা খুশি আমাদের ডোনেট করতে পারেন।<br>একটি অ্যাপ তৈরি করতে যথেষ্ট সময় এবং শ্রম দুটিই প্রয়োজন হয়।<br>আপনার সহায়তা আমাদের আগামীতে আরো ভালো কিছু তৈরি করতে উৎসাহ দেবে। 💖</p>
    <button class="btn upi" onclick="goUPI(event)">💜 UPI তে যান</button>
  </div>
</div>

<script>
const KEY_META='vm_meta_v1';
const SKEY='vm_service_v1';

function go(page){
  const fade=document.getElementById('fadeLogo');
  const fadeImg=document.getElementById('fadeImg');
  fadeImg.src="maa.png";
  fade.classList.add('active');
  setTimeout(()=>location.href=page,300);
}

window.addEventListener('pageshow',()=>{
  const fade=document.getElementById('fadeLogo');
  const fadeText=document.getElementById('fadeText');
  fade.classList.add('active');
  fadeText.classList.add('fadeBlessing');
  setTimeout(()=>fade.classList.remove('active'),2000);
});

function showThanks(){document.getElementById('thanksBox').classList.add('active');}
function closeThanks(){document.getElementById('thanksBox').classList.remove('active');}
function goUPI(e){e.stopPropagation();window.location.href="upi://pay?pa=406310110004309@ybl&pn=SURAJIT%20ROY&mc=0000&mode=02&purpose=00";}

function saveMeta(){
  const meta={
    carName:document.getElementById('carName').value.trim(),
    insurance:document.getElementById('insDate').value,
    pollution:document.getElementById('polDate').value
  };
  localStorage.setItem(KEY_META,JSON.stringify(meta));
  setDisabled(true);
  renderReminders();

  const msg=document.createElement('div');
  msg.textContent="✅ আপডেট সফল হয়েছে!";
  msg.style.position='fixed';
  msg.style.bottom='40px';
  msg.style.left='50%';
  msg.style.transform='translateX(-50%)';
  msg.style.background='linear-gradient(90deg,#4caf50,#81c784)';
  msg.style.color='white';
  msg.style.padding='10px 20px';
  msg.style.borderRadius='10px';
  msg.style.fontWeight='700';
  msg.style.boxShadow='0 4px 10px rgba(0,0,0,0.3)';
  msg.style.opacity='0';
  msg.style.transition='opacity 0.5s ease';
  document.body.appendChild(msg);
  setTimeout(()=>msg.style.opacity='1',100);
  setTimeout(()=>{msg.style.opacity='0';setTimeout(()=>msg.remove(),600);},3000);
}

function setDisabled(state){
  document.getElementById('carName').disabled=state;
  document.getElementById('insDate').disabled=state;
  document.getElementById('polDate').disabled=state;
}

function enableEdit(){setDisabled(false);}

function renderReminders(){
  const meta=JSON.parse(localStorage.getItem(KEY_META)||'{}');
  const ins=meta.insurance?new Date(meta.insurance):null;
  const pol=meta.pollution?new Date(meta.pollution):null;
  const now=new Date();
  let msg='';

  if(ins){
    const days=(ins-now)/(1000*60*60*24);
    if(days<=30 && days>0) msg+=`🧾 <b>Insurance</b> expires in ${Math.ceil(days)} days<br>`;
    if(days<=0) msg+=`❌ Insurance expired!<br>`;
  }
  if(pol){
    const days=(pol-now)/(1000*60*60*24);
    if(days<=15 && days>0) msg+=`💨 <b>Pollution</b> expires in ${Math.ceil(days)} days<br>`;
    if(days<=0) msg+=`❌ Pollution expired!<br>`;
  }

  const data=JSON.parse(localStorage.getItem(SKEY)||'[]');
  if(data.length>0){
    const last=data[data.length-1];
    msg+=`🔧 <b>Last Servicing:</b> ${last.date}`;
  }

  document.getElementById('reminderBox').innerHTML=msg||'';
}

function loadMeta(){
  const m=JSON.parse(localStorage.getItem(KEY_META)||'{}');
  document.getElementById('carName').value=m.carName||'';
  document.getElementById('insDate').value=m.insurance||'';
  document.getElementById('polDate').value=m.pollution||'';
  if(m.carName && m.insurance && m.pollution){setDisabled(true);}
  renderReminders();
}
loadMeta();
</script>
</body>
</html>
