<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Fuel Tracker ‚Äî Vehicle Manager</title>

  <!-- ‚úÖ PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#ffcc00">

  <!-- ‚úÖ App Icons for install -->
  <link rel="apple-touch-icon" href="icons/icon-192x192.png">

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">

  <style>
    :root{
      --bg1:#fffaf5;
      --bg2:#ffe8d2;
      --card:#ffffff;
      --accent:#e74c3c;
      --text:#3b2f2f;
      --primary:#2e86de;
      --secondary:#00b894;
      --brown:#8b4513;
    }
    *{box-sizing:border-box;font-family:'Segoe UI',Roboto,'Noto Sans',sans-serif;}
    body{
      margin:0;
      background:linear-gradient(160deg,var(--bg1),var(--bg2));
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:20px;
      flex-direction:column;
    }
    .card{
      background:var(--card);
      width:100%;
      max-width:480px;
      border-radius:20px;
      padding:28px;
      box-shadow:0 12px 35px rgba(0,0,0,0.12);
      text-align:center;
    }
    .logo{width:90px;height:90px;border-radius:16px;margin-bottom:10px;box-shadow:0 5px 18px rgba(0,0,0,0.2);object-fit:contain;}
    h1{margin:0;font-size:1.8rem;color:var(--accent);}
    h2{margin:4px 0 12px;font-size:1.1rem;color:var(--text);}
    p{color:#555;line-height:1.5;font-size:0.95rem;margin:8px 0 18px;}
    hr{border:none;height:2px;background:linear-gradient(90deg,transparent,var(--accent),transparent);margin:10px 0 20px;}

    .vehicle-card{
      background:#e0f7fa;
      border-radius:16px;
      padding:16px;
      text-align:left;
      box-shadow:0 6px 20px rgba(0,0,0,0.08);
      margin-bottom:14px;
      transition:0.3s;
      cursor:pointer;
    }
    .vehicle-card:hover{transform:translateY(-3px);}
    .vehicle-card strong{color:#2c3e50;}
    .top-row{
      display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;
    }
    .top-row i{
      cursor:pointer;margin-left:10px;color:#555;transition:0.3s;
    }
    .top-row i:hover{color:var(--accent);}
    .details-bar{
      background:linear-gradient(90deg,#ffeb3b,#ff9800,#f44336);
      color:#fff;border:none;border-radius:10px;
      padding:8px 14px;text-align:center;font-weight:600;
      width:100%;cursor:pointer;box-shadow:0 4px 10px rgba(255,87,34,0.3);
    }

    .add-btn{
      background:var(--brown);
      border:none;
      border-radius:50px;
      padding:14px 18px;
      font-size:1rem;
      color:#fff;
      cursor:pointer;
      font-weight:700;
      width:100%;
      box-shadow:0 6px 15px rgba(0,0,0,0.15);
      transition:0.3s;
    }
    .add-btn:hover{transform:translateY(-2px);filter:brightness(1.1);}

    .footer{text-align:center;margin-top:22px;font-size:0.9rem;color:#333;}
    .footer a{color:var(--primary);text-decoration:none;font-weight:600;}
    .heart{margin-top:10px;font-size:1.2rem;color:#e74c3c;cursor:pointer;transition:0.3s;}
    .heart:hover{transform:scale(1.1);}

    /* Modal */
    #addVehicleModal{
      position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,0.5);
      display:flex;align-items:center;justify-content:center;
      opacity:0;visibility:hidden;transition:0.3s;z-index:1000;
    }
    #addVehicleModal.active{opacity:1;visibility:visible;}
    .modal-content{
      background:#fff8e6;
      padding:20px;border-radius:16px;
      width:90%;max-width:400px;
      box-shadow:0 10px 30px rgba(0,0,0,0.2);
      text-align:left;
      border:2px solid #ffeb99;
    }
    .modal-content h3{text-align:center;color:var(--accent);margin-bottom:15px;}
    .modal-content label{display:block;font-size:0.9rem;color:#555;margin-top:8px;font-weight:600;}
    .modal-content input{width:100%;padding:10px;margin-top:4px;border-radius:8px;border:1px solid #b2dfdb;background:#e6ffe6;}
    .modal-content button{width:100%;margin-top:12px;background:linear-gradient(90deg,var(--primary),var(--secondary));border:none;color:#fff;font-weight:600;padding:10px;border-

radius:8px;cursor:pointer;}

    /* Thanks Box Animation */
    #thanksBox{
      position:fixed;
      bottom:30px;
      left:50%;
      transform:translateX(-50%) scale(0.9);
      background:#fff8e6;
      padding:16px;
      border-radius:12px;
      box-shadow:0 6px 14px rgba(0,0,0,0.2);
      max-width:420px;
      text-align:center;
      opacity:0;
      visibility:hidden;
      transition:all 0.4s ease;
      z-index:2000;
      animation:pulse 2s infinite alternate;
    }
    #thanksBox.active{
      opacity:1;
      visibility:visible;
      transform:translateX(-50%) scale(1);
    }
    #thanksBox p{margin:0 0 8px;color:#6d4c41;font-size:0.95rem;font-weight:600;}
    .btn.upi{
      background:linear-gradient(90deg,#7e57c2,#5e35b1);
      color:#fff;border:none;border-radius:8px;
      padding:8px 14px;font-weight:600;cursor:pointer;
    }

    @keyframes pulse{
      from{box-shadow:0 0 15px rgba(255,105,180,0.3);}
      to{box-shadow:0 0 25px rgba(255,105,180,0.7);}
    }
  </style>
</head>
<body>

  <div class="card">
    <img src="FuelTracker.png" class="logo" alt="Fuel Tracker">
    <h1>Fuel-Tracker</h1>
    <h2>Vehicle Manager</h2>
    <p>Manage multiple vehicles ‚Äî track fuel, insurance & servicing easily. Your data will be saved offline and is completely secure.</p>

    <hr>
    <div id="vehicleList"></div>

    <button class="add-btn" onclick="openModal()"><i class="fas fa-plus-circle"></i> Add Vehicle</button>

    <div class="footer">
      Chakdaha Roy Computer Academy<br>
      Email: <a href="mailto:surajit.chakdaha@gmail.com">surajit.chakdaha@gmail.com</a><br>
      <div class="heart" onclick="showThanks()">‚ù§Ô∏è Thanks ‚ù§Ô∏è</div>
    </div>
  </div>

  <!-- Add Vehicle Modal -->
  <div id="addVehicleModal">
    <div class="modal-content">
      <h3>Add / Edit Vehicle</h3>
      <label>Vehicle Type:</label><input type="text" id="vehicleType">
      <label>Model:</label><input type="text" id="vehicleModel">
      <label>Vehicle Number:</label><input type="text" id="vehicleNumber">
      <label>Insurance Expiry:</label><input type="date" id="insuranceDate">
      <label>Pollution Expiry:</label><input type="date" id="pollutionDate">
      <button onclick="saveVehicle()">Save Vehicle</button>
    </div>
  </div>

  <!-- Thanks Box -->
  <div id="thanksBox">
    <p>üôè Thank you for supporting our project!<br>You can donate any amount starting from ‚Çπ1 üíñ</p>
    <button class="btn upi" onclick="goUPI()">üíú Donate via UPI</button>
  </div>
<script>
  if ("serviceWorker" in navigator) {
    navigator.serviceWorker
      .register("./service-worker.js")
      .then(() => console.log("Service Worker Registered"))
      .catch((err) => console.log("SW registration failed:", err));
  }

    let editId = null;

    function getVehicles(){return JSON.parse(localStorage.getItem('vehicles') || '[]');}
    function saveVehicles(list){localStorage.setItem('vehicles', JSON.stringify(list));}

    function renderVehicles(){
      const list = getVehicles();
      const container = document.getElementById('vehicleList');
      container.innerHTML = '';
      list.forEach((v,i)=>{
        const div=document.createElement('div');
        div.className='vehicle-card';
        div.innerHTML=`
          <div class="top-row">
            <strong>${v.type}: ${v.model}</strong>
            <div>
              <i class="fas fa-pen" title="Edit"></i>
              <i class="fas fa-trash" title="Delete"></i>
            </div>
          </div>
          <div>Number: ${v.number||'--'}</div>
          <div>Insurance: ${v.insurance||'--'}</div>
          <div>Pollution: ${v.pollution||'--'}</div>
          <button class="details-bar"><i class="fas fa-info-circle"></i> More Details</button>
        `;
        div.querySelector('.fa-pen').onclick=(e)=>{e.stopPropagation();openModal(i);}
        div.querySelector('.fa-trash').onclick=(e)=>{e.stopPropagation();deleteVehicle(i);}
        div.querySelector('.details-bar').onclick=(e)=>{e.stopPropagation();goToDetails(v);}
        container.appendChild(div);
      });
    }

    // ‚úÖ Service Worker registration (PWA requirement)
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('./service-worker.js')
      .then(() => console.log("‚úÖ Service Worker Registered"))
      .catch(err => console.log("SW Error:", err));
    }

    function openModal(id=null){
      editId=id;
      document.getElementById('addVehicleModal').classList.add('active');
      if(id!==null){
        const v=getVehicles()[id];
        document.getElementById('vehicleType').value=v.type;
        document.getElementById('vehicleModel').value=v.model;
        document.getElementById('vehicleNumber').value=v.number;
        document.getElementById('insuranceDate').value=v.insurance;
        document.getElementById('pollutionDate').value=v.pollution;
      } else {
        document.querySelectorAll('#addVehicleModal input').forEach(i=>i.value='');
      }
    }

    function closeModal(){document.getElementById('addVehicleModal').classList.remove('active');}
    document.getElementById('addVehicleModal').addEventListener('click',e=>{if(e.target.id==='addVehicleModal')closeModal();});

    function saveVehicle(){
      const v={
        type:document.getElementById('vehicleType').value||'--',
        model:document.getElementById('vehicleModel').value||'--',
        number:document.getElementById('vehicleNumber').value||'--',
        insurance:document.getElementById('insuranceDate').value||'--',
        pollution:document.getElementById('pollutionDate').value||'--'
      };
      let list=getVehicles();
      if(editId!==null){list[editId]=v;}
      else list.push(v);
      saveVehicles(list);
      renderVehicles();
      closeModal();
    }

    function deleteVehicle(i){
      if(confirm('Delete this vehicle?')){
        let list=getVehicles();
        list.splice(i,1);
        saveVehicles(list);
        renderVehicles();
      }
    }

    function goToDetails(v){
      localStorage.setItem('currentVehicle', JSON.stringify(v));
      window.location.href='vehicle.html';
    }

    function showThanks(){
      const box=document.getElementById('thanksBox');
      box.classList.add('active');
      setTimeout(()=>box.classList.remove('active'),4000);
    }

    function goUPI(){
      if(/Android|iPhone/i.test(navigator.userAgent)){
        window.location.href="upi://pay?pa=406310110004309@ybl&pn=SURAJIT%20ROY&mc=0000&mode=02&purpose=00";
      } else {
        alert("üì± Please open this on your mobile device to donate via UPI.");
      }
    }

    window.onload=renderVehicles;
  </script>
</body>
</html>
