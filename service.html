<!doctype html>
<html lang="bn">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Servicing Detail — Fuel Tracker</title>
<style>
  :root{
    --bg1:#f5e0c3;
    --bg2:#ffe0b2;
    --card:#fff3e0;
    --accent:#8e24aa;
    --text:#4a2f23;
  }

  *{box-sizing:border-box;font-family:Inter,system-ui,Segoe UI,Roboto,'Noto Sans',sans-serif;}

  body{
    margin:0;
    background:linear-gradient(135deg,var(--bg1),var(--bg2));
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
    padding:18px;
  }

  .card{
    width:100%;
    max-width:520px;
    background:var(--card);
    border-radius:20px;
    padding:24px;
    box-shadow:0 12px 30px rgba(0,0,0,0.15);
    text-align:center;
  }

  .logo{
    width:100px;height:100px;
    display:block;margin:0 auto 12px auto;
    border-radius:12px;
    object-fit:contain;
    box-shadow:0 6px 18px rgba(0,0,0,0.3);
    animation:fadeIn 1s ease;
  }

  @keyframes fadeIn{
    from{opacity:0;transform:scale(0.9);}
    to{opacity:1;transform:scale(1);}
  }

  h1{color:var(--accent);margin:8px 0 10px 0;}
  p{color:var(--text);font-size:0.95rem;margin-bottom:14px;}

  label{display:block;margin-top:10px;font-weight:600;color:var(--text);}
  input[type="text"],input[type="date"],input[type="number"]{
    width:100%;padding:10px;border-radius:10px;border:1px solid #a6c9b9;margin-top:6px;
    background:linear-gradient(90deg,#eaf5ff,#e8ffe8);
  }

  .checkbox-group{
    display:flex;
    justify-content:center;
    gap:20px;
    margin-top:10px;
  }

  .btn{
    border:none;border-radius:10px;padding:10px 14px;font-weight:700;
    cursor:pointer;color:#fff;transition:0.3s;margin-top:14px;
  }
  .btn.save{background:linear-gradient(90deg,#81c784,#4caf50);}
  .btn.back{background:linear-gradient(90deg,#42a5f5,#64b5f6);}
  .btn:hover{filter:brightness(1.1);}

  table{width:100%;border-collapse:collapse;margin-top:18px;}
  th,td{padding:8px;text-align:center;border-bottom:1px solid #f3e5ab;}
  th{background:#f0d8ff;color:#4b2e05;}
  td{background:#fff8e1;}

  #fadeLogo{
    position:fixed;top:0;left:0;width:100%;height:100%;
    background:linear-gradient(135deg,#ffb74d,#ffcc80);
    display:flex;align-items:center;justify-content:center;
    opacity:0;visibility:hidden;
    transition:opacity 0.5s ease;
    z-index:1000;
  }
  #fadeLogo.active{opacity:1;visibility:visible;animation:fadeOut 1s ease 1.8s forwards;}
  #fadeLogo img{width:120px;height:120px;object-fit:contain;animation:zoomIn 1.2s ease;}
  @keyframes fadeOut{to{opacity:0;visibility:hidden;}}
  @keyframes zoomIn{0%{transform:scale(0.6);opacity:0;}100%{transform:scale(1);opacity:1;}}
</style>
</head>
<body>

  <!-- fade logo -->
  <div id="fadeLogo">
    <img src="FuelTracker.png" alt="Logo">
  </div>

  <div class="card">
    <img src="FuelTracker.png" class="logo" alt="Logo">
    <h1>🔧 Servicing Detail</h1>
    <p>গাড়ির সার্ভিসিং রেকর্ড রাখুন — কবে, কোথায়, কত টাকায় সার্ভিস করিয়েছেন এবং কোন ধরনের সার্ভিস।</p>

    <label>Servicing Date</label>
    <input type="date" id="srvDate">

    <label>Garage / Workshop Name (ঐচ্ছিক)</label>
    <input type="text" id="srvPlace" placeholder="e.g. Roy Motors, Kolkata">

    <label>Bill Amount (₹)</label>
    <input type="number" id="srvCost" placeholder="e.g. 1500">

    <label>Service Type (ঐচ্ছিক)</label>
    <div class="checkbox-group">
      <label><input type="checkbox" id="major"> Major Service</label>
      <label><input type="checkbox" id="minor"> Minor / Puncture</label>
    </div>

    <label>Details / Parts Changed (ঐচ্ছিক)</label>
    <input type="text" id="srvNote" placeholder="e.g. Oil, Filter, Brake Checkup">

    <button class="btn save" onclick="saveService()">💾 Save Record</button>
    <button class="btn back" onclick="backHome()">← Back to Home</button>

    <table id="tbl">
      <thead><tr><th>Date</th><th>Amount</th><th>Type</th><th>Garage</th><th>Details</th></tr></thead>
      <tbody></tbody>
    </table>
  </div>

<script>
  const SKEY='vm_service_v1';

  function loadService(){
    const data=JSON.parse(localStorage.getItem(SKEY)||'[]');
    const tbody=document.querySelector('#tbl tbody');
    tbody.innerHTML='';
    data.forEach(d=>{
      const tr=document.createElement('tr');
      tr.innerHTML=`<td>${d.date}</td><td>₹${d.cost}</td><td>${d.type}</td><td>${d.place||'—'}</td><td>${d.note||'—'}</td>`;
      tbody.appendChild(tr);
    });
  }

  function saveService(){
    const date=document.getElementById('srvDate').value;
    const cost=document.getElementById('srvCost').value.trim();
    const place=document.getElementById('srvPlace').value.trim();
    const note=document.getElementById('srvNote').value.trim();
    const isMajor=document.getElementById('major').checked;
    const isMinor=document.getElementById('minor').checked;

    // ✅ কেবল তারিখ ও টাকা বাধ্যতামূলক
    if(!date || !cost){
      alert('⚠️ অনুগ্রহ করে তারিখ ও টাকার পরিমাণ দিন।');
      return;
    }

    const type=isMajor && isMinor ? "Major + Minor" :
                isMajor ? "Major" :
                isMinor ? "Minor" : "—";

    const record={date,cost,place,note,type};
    const data=JSON.parse(localStorage.getItem(SKEY)||'[]');
    data.push(record);
    localStorage.setItem(SKEY,JSON.stringify(data));

    alert('✅ সার্ভিস রেকর্ড সংরক্ষিত হয়েছে!');
    document.querySelectorAll('input').forEach(el=>el.type!='checkbox'?el.value='':el.checked=false);
    loadService();
  }

  function backHome(){
    const fade=document.getElementById('fadeLogo');
    fade.classList.add('active');
    setTimeout(()=>location.href='index.html',1800);
  }

  loadService();
</script>
</body>
</html>
